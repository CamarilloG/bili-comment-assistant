I have researched the issue and the new feature request.

**Diagnosis of "Missing Filters"**:
In `f:\AI+program\bili_comment\core\search.py`, the `search_videos` function constructs the URL like this:
```python
url = f"https://search.bilibili.com/video?keyword={encoded_keyword}&order={order}&duration={duration}"
```
This looks correct for basic filters. However, if the user says "More filters are missing", they might be referring to `tids` (categories) or other advanced filters which Bilibili supports but are not in the URL.
*Correction*: The user mentioned "Comprehensive Settings / More Filters seem invalid". In the `gui.py`, we have `sort` and `duration`. If those are not working, it might be because the values passed to `search_videos` are incorrect or the URL structure changed (unlikely for basic params).
*Wait*, I see the code in `main.py`:
```python
filter_config = config["search"].get("filter", {})
videos = search_mgr.search_videos(
    keyword, 
    max_count=fetch_count,
    order=filter_config.get("sort", "totalrank"),
    duration=filter_config.get("duration", 0)
)
```
This looks correct.
However, I will double check if Bilibili still uses `order` and `duration`.
Based on search results, Bilibili web search uses:
- `order`: `totalrank` (default), `click`, `pubdate`, `dm`, `stow`.
- `duration`: `0` (all), `1` (<10m), `2` (10-30m), `3` (30-60m), `4` (>60m).
These match the code.
*Hypothesis*: Maybe the user expects *GUI changes* to immediately reflect? But the code saves config then runs.
*Wait*, looking at `config.yaml` from previous turns:
```yaml
filter:
  sort: totalrank
  duration: 0
```
It seems the user might be selecting options in GUI but they aren't being saved or used?
Ah, the user said "Search/Filter **title text** changed to Comprehensive Settings". I did that.
The user says "More filters seem invalid, search url didn't splice them".
I will verify `gui.py` `save_config` logic.
In `gui.py`:
```python
conf = {
    ...
    "search": {
        ...
        "filter": {
            "sort": self.sort_map.get(self.sort_cb.get(), "totalrank"),
            "duration": self.dur_map.get(self.dur_cb.get(), 0)
        },
        ...
```
This also looks correct.
I will assume the user might be referring to the **new** requirement: "Date Range".

**Date Range Feature**:
Bilibili doesn't strictly support "Date Range" as a URL parameter for *Video Search* in the same way as `duration`. It usually supports `pubdate` sort.
However, some scripts use `tids` or post-filtering.
Actually, Bilibili advanced search (not exposed easily) might not have "date range" query params exposed in the simple `search.bilibili.com/video` interface anymore, or they are obscure.
*Search results* hint at `pubdate` sorting but not range filtering in URL params like `date_start` / `date_end`.
The `GreasyFork` script suggests filtering *client-side* (in browser) or using `pubdate` order and stopping.
*Decision*: Since URL params for arbitrary date ranges are not documented/reliable for the public web search interface, I will implement **Post-Filtering** for the date logic.
I will fetch videos (sorted by `pubdate` if "Recent" is selected, or just standard search) and then filter them in Python based on the parsed `date` string (e.g., "2023-10-01" or "Yesterday").

**Plan**:

1.  **GUI Updates (`gui.py`)**:
    *   Add a "Time Filter" (`时间限制`) Combobox in "Comprehensive Settings".
    *   Options:
        *   "No Limit" (`不限制`)
        *   "Recent X Days" (`近几天`) -> Show an Entry for `days`.
        *   "Date Range" (`指定日期范围`) -> Show two DatePickers (Start/End).
    *   Dynamic UI: Show/Hide inputs based on selection.

2.  **Config Updates (`config.py`)**:
    *   Add `time_range` field to `search.filter`. Structure: `{ type: "none"|"recent"|"range", value: ... }`.

3.  **Search Logic Updates (`core/search.py`)**:
    *   The `search_videos` function extracts `date`. I need to ensure the date parsing is robust (handles "2 hours ago", "Yesterday", "2023-10-25").
    *   Pass the date filter criteria to `search_videos` (or filter in `main.py`).
    *   *Better approach*: Filter in `main.py` where we already do `candidate_videos` filtering (History, Title). This keeps `search.py` focused on fetching.

4.  **Date Parsing Logic**:
    *   Implement a helper to convert Bilibili date strings to `datetime` objects.
    *   Bilibili formats: "2023-10-25", "Yesterday", "5 hours ago".

5.  **Implementation Details**:
    *   **GUI**: Use `ttk.DateEntry` (from `ttkbootstrap`) for date range.
    *   **Main**: Add `filter_by_date` logic inside the candidate loop.

This addresses the "Missing Filter" (by adding the requested one) and explains that if URL params don't exist, we do it in code.

**Regarding "Invalid Filters"**:
I will verify if `order` and `duration` are actually working by checking the logs (the user provided logs show `排序: totalrank, 时长: 0`). This means they *are* being passed. If the user feels they are invalid, maybe they want them to *work* better? But technically they are passing. I will focus on adding the Date filter which is the concrete request.

**Revised Plan Steps**:
1.  **Refactor GUI**: Add Date Filter UI components (Combobox + Frame for inputs).
2.  **Update Config**: Save/Load new date filter settings.
3.  **Update `main.py`**:
    *   Parse `pubdate` from video info.
    *   Implement filtering logic:
        *   If "Recent X Days": `video_date >= now - X days`.
        *   If "Range": `start <= video_date <= end`.
4.  **Helper**: Add date parsing utility.

*Self-Correction*: Bilibili search result dates are often relative ("2 hours ago"). Need a robust parser.

*Verification of "Invalid Filters"*:
The user said "Search/Filter seems invalid, search url didn't splice them".
In the log: `04:34:01 | 搜索关键词: 爬虫, 排序: totalrank, 时长: 0`
This shows `order` and `duration` *are* being used.
Maybe the user selected something else in GUI but it reset? Or they selected "Latest" but it sent "totalrank"?
I will double check the `save_config` mapping in `gui.py`.
`sort_val = self.sort_map.get(self.sort_cb.get(), "totalrank")`
If the user selects "Latest", `sort_map` should have it.
I'll check `setup_ui` maps.
`self.sort_map = {"综合排序": "totalrank", "最新发布": "pubdate", ...}`.
This looks correct.
I will proceed with adding the Date Filter.